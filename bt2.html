<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Qu·∫£n l√Ω s·∫£n ph·∫©m</title>
</head>
<body>
    <script>
        let choice;
        let products = [];

        // Hi·ªÉn th·ªã t·∫•t c·∫£ s·∫£n ph·∫©m
        function displayProducts() {
            console.table(products);
        }

        // T√¨m s·∫£n ph·∫©m theo id
        function findProductById(id) {
            return products.find((product) => product.id === id);
        }

        // T√¨m s·∫£n ph·∫©m theo kho·∫£ng gi√°
        function findProductsByPriceRange(start, end) {
           return products.filter((product)=>product.price>=start && product.price<=end);
        }

        do {
            choice = +prompt(
`           1. Th√™m s·∫£n ph·∫©m v√†o danh s√°ch s·∫£n ph·∫©m.
            2. Hi·ªÉn th·ªã t·∫•t c·∫£ s·∫£n ph·∫©m.
            3. Hi·ªÉn th·ªã chi ti·∫øt s·∫£n ph·∫©m theo id.
            4. C·∫≠p nh·∫≠t th√¥ng tin s·∫£n ph·∫©m theo id 
            5. X√≥a s·∫£n ph·∫©m theo id.
            6. T√¨m s·∫£n ph·∫©m theo kho·∫£ng gi√°.
            7. Tho√°t.`
            );

            switch (choice) {
                case 1:
                    let id = Math.ceil(Math.random() * 100000000);
                    let name = prompt("Nh·∫≠p t√™n s·∫£n ph·∫©m: ");
                    let price = +prompt("Nh·∫≠p gi√° s·∫£n ph·∫©m: ");
                    let category = prompt("Nh·∫≠p danh m·ª•c s·∫£n ph·∫©m: ");
                    let quantity = +prompt("Nh·∫≠p s·ªë l∆∞·ª£ng s·∫£n ph·∫©m trong kho: ");
                    const product = {
                        id,
                        name,
                        price,
                        category,
                        quantity
                    };
                    products.push(product);
                    console.log(`Th√™m th√†nh c√¥ng s·∫£n ph·∫©m ${product.name} c√≥ id ${product.id}`);
                    break;

                case 2:
                    displayProducts();
                    break;

                case 3:
                    let productIdSearch = +prompt("Nh·∫≠p id s·∫£n ph·∫©m c·∫ßn t√¨m: ");
                    let foundProduct = findProductById(productIdSearch);
                    if (foundProduct) {
                        console.log(`Chi ti·∫øt s·∫£n ph·∫©m: \nID: ${foundProduct.id}\nT√™n: ${foundProduct.name}\nGi√°: ${foundProduct.price}\nDanh m·ª•c: ${foundProduct.category}\nS·ªë l∆∞·ª£ng: ${foundProduct.quantity}`);
                    } else {
                        console.log(`Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m c√≥ id ${productIdSearch}`);
                    }
                    break;

                case 4:
                    let productIdUpdate = +prompt("Nh·∫≠p id s·∫£n ph·∫©m c·∫ßn c·∫≠p nh·∫≠t: ");
                    let productToUpdate = findProductById(productIdUpdate);
                    if (productToUpdate) {
                        let newName = prompt("Nh·∫≠p t√™n m·ªõi: ");
                        let newPrice = +prompt("Nh·∫≠p gi√° m·ªõi: ");
                        let newCategory = prompt("Nh·∫≠p danh m·ª•c m·ªõi: ");
                        let newQuantity = +prompt("Nh·∫≠p s·ªë l∆∞·ª£ng m·ªõi: ");
                        productToUpdate.name = newName;
                        productToUpdate.price = newPrice;
                        productToUpdate.category = newCategory;
                        productToUpdate.quantity = newQuantity;
                        console.log(`C·∫≠p nh·∫≠t th√†nh c√¥ng s·∫£n ph·∫©m c√≥ id ${productIdUpdate}`);
                    } else {
                        console.log(`Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m c√≥ id ${productIdUpdate}`);
                    }
                    break;

                case 5:
                    let productIdDelete = +prompt("Nh·∫≠p id s·∫£n ph·∫©m c·∫ßn x√≥a: ");
                    let productToDelete = findProductById(productIdDelete);
                    if (productToDelete) {
                        products = products.filter(product => product.id !== productIdDelete);
                        console.log(`X√≥a th√†nh c√¥ng s·∫£n ph·∫©m c√≥ id ${productIdDelete}`);
                    } else {
                        console.log(`Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m c√≥ id ${productIdDelete}`);
                    }
                    break;
                
                case 6:
                    let start = prompt("Nh·∫≠p kho·∫£ng gi√° b·∫Øt ƒë·∫ßu");
                    let end = prompt("Nh·∫≠p kho·∫£ng gi√° k·∫øt th√∫c");
                    if (isNaN(start) || isNaN(end)) {
                        console.log("Kho·∫£ng gi√° ph·∫£i l√† s·ªë h·ª£p l·ªá!");
                    } else if (start === "" || end === "") {
                        console.log("Kho·∫£ng gi√° kh√¥ng th·ªÉ ch·ª©a kho·∫£ng tr·∫Øng.");
                    } else if (parseFloat(start) < parseFloat(end)) {
                        let productsInRange = findProductsByPriceRange(parseFloat(start), parseFloat(end));
                        if (productsInRange.length > 0) {
                            console.table(productsInRange);
                        } else {
                            console.log(`Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m n√†o trong kho·∫£ng gi√° ${start} - ${end}`);
                        }
                    } else {
                        console.log("Kho·∫£ng gi√° kh√¥ng h·ª£p l·ªá!");
                    }
                    break;

                case 7:
                    console.log("üëã Tho√°t ch∆∞∆°ng tr√¨nh.");
                    break;

                default:
                    console.log("L·ª±a ch·ªçn kh√¥ng h·ª£p l·ªá! Vui l√≤ng ch·ªçn l·∫°i.");
                    break;
            }
        } while (choice !== 7);
    </script>
</body>
</html>
